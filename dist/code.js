(()=>{"use strict";const e=document.querySelector("#header_Icon_shop"),t=document.querySelector("#main-banner"),n=document.querySelector("#point1"),a=document.querySelector("#point2"),i=document.querySelector("#point3"),r=document.querySelector("#main-categoriya");let o=document.querySelector("#main-books");document.querySelector("#shopBag"),document.querySelector("#button_load");const l=document.querySelector("#shopBagQuantity"),s=document.querySelector("#shopBagEll"),c=document.querySelector("#header_Icon_shop");var d=["Architecture","Art & Fashion","Biography","Business","Crafts & Hobbies","Drama","Fiction","Food & Drink","Health & Wellbeing","History & Politics","Humor","Poetry","Psychology","Science","Technology","Travel & Maps"];let m,u,g,p,h=[],L=0;function y(e){switch(t.innerHTML=`<img class="main-banner" src="./images/banner${e}.jpg" alt="">`,e){case 1:n.innerHTML='<img src="./images/pointFull.svg" alt="">',a.innerHTML='<img src="./images/pointEmpty.svg" alt="">',i.innerHTML='<img src="./images/pointEmpty.svg" alt="">';break;case 2:n.innerHTML='<img src="./images/pointEmpty.svg" alt="">',a.innerHTML='<img src="./images/pointFull.svg" alt="">',i.innerHTML='<img src="./images/pointEmpty.svg" alt="">';break;case 3:n.innerHTML='<img src="./images/pointEmpty.svg" alt="">',a.innerHTML='<img src="./images/pointEmpty.svg" alt="">',i.innerHTML='<img src="./images/pointFull.svg" alt="">'}localStorage.setItem("numberPage",e)}function v(t,n,a){a&&(o.innerHTML=""),fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${t}"&key=AIzaSyA3EvHpDAHKUEmqhj-5YkjCY5uo8RHXcOQ&printType=books&startIndex=${n}&maxResults=6&langRestrict=en`).then((e=>e.json())).then((t=>{let n=t.items;n.forEach((t=>{!function(t,n,a){let i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),l=document.createElement("img");l.setAttribute("src",n.volumeInfo.imageLinks.smallThumbnail),l.setAttribute("alt","./images/blank.jpg"),document.createElement("p");let s=document.createElement("div");n.volumeInfo.authors.forEach((e=>{let t=document.createTextNode(e);s.appendChild(t)}));let c=document.createElement("div"),d=document.createTextNode(n.volumeInfo.title);c.appendChild(d),i.classList.add("listBook");let m=document.createElement("div"),u=document.createTextNode(n.volumeInfo.description);m.appendChild(u),l.classList.add("list_books_img"),r.appendChild(l),i.appendChild(r),s.classList.add("book-author"),c.classList.add("book-title"),m.classList.add("book-discrib"),o.appendChild(s);let g=document.createElement("div");g.classList.add("raiting");let p=0,h="",L=document.createElement("div");L.innerHTML="";try{let e=n.saleInfo.retailPrice.amount;L.innerHTML=n.saleInfo.retailPrice.currencyCode+" "+e}catch(e){}L.classList.add("bookPrice");try{p=n.volumeInfo.averagerating,null==p&&(p=0),0!=p?h="./images/Star.svg":(h="./images/Star_grey.svg",p=5);for(let e=1;e<=p;e++)g.innerHTML=g.innerHTML+'<img src="'+h+'" alt="">';for(let e=p+1;e<=5;e++)g.innerHTML=g.innerHTML+'<img src="./images/Star_grey.svg" alt="">'}catch(e){h="./images/Star_grey.svg",p=5;for(let e=1;e<=p;e++)g.innerHTML=g.innerHTML+'<img src="./images/Star_grey.svg" alt="">'}try{let e=n.volumeInfo.ratingsCount;null==e&&(e=0),0!=e&&(g.innerHTML=g.innerHTML+'<div class="review">'+e+" review </div>")}catch(e){}o.appendChild(c),o.appendChild(g),o.appendChild(m),o.appendChild(L),i.appendChild(o),o.classList.add("list_books_dis");let y=document.createElement("button");y.dataset.id=n.id,a.includes(n.id)?(y.innerText="IN THE CART",y.classList.remove("button_buy"),y.classList.add("button_buyCart")):(y.innerText="BUY NOW",y.classList.add("button_buy"),y.classList.remove("button_buyCart")),y.addEventListener("click",(t=>{!function(e,t,n){if(n.includes(e)){let a=n.indexOf(e);n.splice(a,1),t.innerText="BUY NOW",t.classList.add("button_buy"),t.classList.remove("button_buyCart")}else n.push(e),t.innerText="IN THE CART",t.classList.remove("button_buy"),t.classList.add("button_buyCart")}(t.target.dataset.id,t.target,a),localStorage.setItem("bookCartLS",JSON.stringify(a)),0!=a.length?e.hasChildNodes()?shopBagQuantity.innerHTML=a.length:(e.appendChild(shopBagEll),shopBagQuantity.innerHTML=a.length,e.appendChild(shopBagQuantity)):(e.removeChild(shopBagEll),e.removeChild(shopBagQuantity))})),o.appendChild(y),t.append(i)}(o,t,h)}));let a=document.createElement("div");a.dataset.id="footer",a.classList.add("footer-class");let i=document.createElement("button");i.innerText="Load more",i.classList.add("button_load"),i.addEventListener("click",(e=>{let t=e.currentTarget.offsetParent;e.currentTarget.offsetParent.offsetParent.removeChild(t),v(document.querySelector("#"+u).innerText,L+1,!1),L+=6})),a.appendChild(i),o.appendChild(a),console.log(n.lenght)})).catch((()=>{console.log("error")}))}h=JSON.parse(localStorage.getItem("bookCartLS")??"[]"),document.addEventListener("DOMContentLoaded",(()=>{localStorage.getItem("numberPage"),(isNaN(m)||0==m||null==m)&&(m=1),y(m),g='<ul class="listCategoriya">',p=0,d.forEach((e=>{0==p?(g=g+'<li id="id_cat'+p+'" class="currentCategoriya">'+e+"</li>",u="id_cat"+p,p++):(g=g+'<li id="id_cat'+p+'" class="listCategoriya_li">'+e+"</li>",p++)})),g+="</ul>",r.innerHTML=g,r.addEventListener("click",(e=>{let t=document.querySelector("#"+u),n=e.target.id,a=document.querySelector("#"+n);t.classList.remove("currentCategoriya"),t.classList.add("listCategoriya_li"),a.classList.add("currentCategoriya"),a.classList.remove("listCategoriya_li"),u=n,v(e.target.innerHTML,1,!0),L=6})),h=JSON.parse(localStorage.getItem("bookCartLS")??"[]"),v("Architecture",1,!0),L=6,0!=h.length?c.hasChildNodes()?l.innerHTML=h.length:(c.appendChild(s),l.innerHTML=h.length,c.appendChild(l)):(c.removeChild(s),c.removeChild(l))})),setInterval((()=>{localStorage.getItem("numberPage"),(isNaN(m)||0==m||null==m)&&(m=1),m++,m>3&&(m=1),y(m),localStorage.setItem("numberPage",m)}),5e3),n.addEventListener("click",(()=>{y(1)})),a.addEventListener("click",(()=>{y(2)})),i.addEventListener("click",(()=>{y(3)}))})();